{% extends "base.html" %}

{% block title %}Create - FlashCard Generation{% endblock %}

{% block head %}
<style>
    .ai-suggestions {
        transition: all 0.3s ease;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <h1 class="display-5 mb-0">Create Flashcards</h1>
                <a href="/" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left me-2"></i>Back to List
                </a>
            </div>
            <hr>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">Flashcard Details</h5>
                </div>
                <div class="card-body">
                    <form id="createForm" method="post" action="/create">
                        <div class="mb-3">
                            <label for="front" class="form-label">Front Side (Question)</label>
                            <input type="text" class="form-control" id="front" name="front" 
                                   placeholder="e.g., What is photosynthesis?" required>
                            <div class="form-text">This is what will be shown as the question or prompt.</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="back" class="form-label">Back Side (Answer)</label>
                            <textarea class="form-control" id="back" name="back" rows="5" 
                                      placeholder="e.g., The process used by plants to convert light energy into chemical energy..." required></textarea>
                            <div class="form-text">This is the answer or explanation that will be shown when the card is flipped.</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="tags" class="form-label">Tags (Optional)</label>
                            <input type="text" class="form-control" id="tags" name="tags" 
                                   placeholder="e.g., biology, science, plants">
                            <div class="form-text">Separate multiple tags with commas.</div>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save me-2"></i>Save Flashcard
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-light">
                    <h5 class="mb-0">AI Assistance</h5>
                </div>
                <div class="card-body">
                    <p class="card-text mb-3">Let AI help you generate flashcard content based on a topic or question.</p>
                    
                    <form id="aiForm" class="mb-4">
                        <div class="mb-3">
                            <label for="topic" class="form-label">Topic or Question</label>
                            <input type="text" class="form-control" id="topic" 
                                   placeholder="e.g., Photosynthesis process">
                        </div>
                        <div class="d-grid">
                            <button type="button" id="generateBtn" class="btn btn-success">
                                <i class="bi bi-lightning me-2"></i>Generate Content
                                <span class="spinner-border spinner-border-sm d-none ms-2" role="status" aria-hidden="true"></span>
                            </button>
                        </div>
                    </form>
                    
                    <div id="aiSuggestions" class="ai-suggestions d-none">
                        <div class="alert alert-success">
                            <h6 class="alert-heading">AI Suggestions</h6>
                            <hr>
                            <div class="mb-3">
                                <strong>Question:</strong>
                                <p id="suggestedQuestion"></p>
                                <button class="btn btn-sm btn-outline-primary" id="useQuestionBtn">
                                    Use this question
                                </button>
                            </div>
                            <div>
                                <strong>Answer:</strong>
                                <p id="suggestedAnswer"></p>
                                <button class="btn btn-sm btn-outline-primary" id="useAnswerBtn">
                                    Use this answer
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0">Tips</h5>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">Keep questions clear and specific</li>
                        <li class="list-group-item">Use concise wording for better recall</li>
                        <li class="list-group-item">Add context when necessary</li>
                        <li class="list-group-item">Use tags to organize your flashcards</li>
                        <li class="list-group-item">Try to use the AI to get started quickly</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // AI generation functionality
    document.getElementById('generateBtn').addEventListener('click', function() {
        const topic = document.getElementById('topic').value.trim();
        if (!topic) {
            alert('Please enter a topic or question first');
            return;
        }
        
        const spinner = this.querySelector('.spinner-border');
        spinner.classList.remove('d-none');
        this.disabled = true;
        
        // Simulating AI generation with a timeout
        // In a real application, this would be an API call
        setTimeout(function() {
            // Example AI-generated content
            const question = `What is ${topic}?`;
            const answer = `${topic} is an important concept that involves multiple components and processes. It is defined as a systematic approach to understanding natural phenomena. The key elements include observation, hypothesis formation, experimentation, and conclusion drawing.`;
            
            document.getElementById('suggestedQuestion').textContent = question;
            document.getElementById('suggestedAnswer').textContent = answer;
            document.getElementById('aiSuggestions').classList.remove('d-none');
            
            spinner.classList.add('d-none');
            document.getElementById('generateBtn').disabled = false;
        }, 1500);
    });
    
    // Use AI suggestion buttons
    document.getElementById('useQuestionBtn').addEventListener('click', function() {
        const question = document.getElementById('suggestedQuestion').textContent;
        document.getElementById('front').value = question;
    });
    
    document.getElementById('useAnswerBtn').addEventListener('click', function() {
        const answer = document.getElementById('suggestedAnswer').textContent;
        document.getElementById('back').value = answer;
    });
</script>
{% endblock %} 